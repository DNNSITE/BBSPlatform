(function(e){var t={localzRes:{fldSelectorPlaceholderText:"Select item..."},dVal:null,modId:"",listSrcUrl:"",listSrcName:"",filterListByTypeAcc:null,minimumResultsForSearch:10,allowClear:!0,onChange:function(){}},l={init:function(l){var r={};return this.each(function(){r=e.extend(!0,{},t,l),e(this).data("settings",r),s(this)})},getValue:function(){return n()},clearValue:function(){clearFile()}};e.fn.bbsAccAgreeSelector=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.bbsAccAgreeSelector"):l.init.apply(this,arguments)};var r=function(t){return e(t).data("settings")},s=function(t){var l=r(t),s="",n=e(t),u=l.dVal;s+='<select id="frmAccountGUID'+l.modId+'" name="frmAccountGUID'+l.modId+'" class="form-control select2-single" data-val="'+(u?u:"")+'"></select>',n.append(s),e("#frmAccountGUID"+l.modId).select2({theme:"bootstrap",hideSelectionFromResult:a,escapeMarkup:function(e){return e},minimumResultsForSearch:l.minimumResultsForSearch,placeholder:l.localzRes.fldSelectorPlaceholderText,templateResult:c,templateSelection:o,allowClear:l.allowClear}),e("#frmAccountGUID"+l.modId).on("change.bbsaccagreeselector"+l.modId,l.onChange),i(t)},i=function(t){var l=r(t),s="#frmAccountGUID"+l.modId,i={srcname:l.listSrcName,dlrtp:l.filterListByTypeAcc},c=e(s).data("val"),o=!1;e(s).html(""),e(s).prop("disabled",!1),e.ajax({url:l.listSrcUrl+"&jsoncallback=?",dataType:"json",async:!1,data:i,success:function(t){e(s).append('<option value="">&nbsp</option>'),e.map(t,function(t){o=t.id==c,e(s).append('<option value="'+t.id+"\" data-meta='"+JSON.stringify(t)+"'"+(1==o?' selected="selected"':"")+">"+t.title+"</option>")})}})},c=function(t){if(!t.id)return t.text;var l=e(t.element).data("meta");if(!l||"object"!=typeof l)return t.text;var r='<div class="select2-result-repository"><div class="select2-result-repository__avatar"><img src="'+l.logourl+'" class="img-sm img-circle"/></div><div class="select2-result-repository__meta"><div class="select2-result-repository__title">'+l.title+"</div>";return l.subtitle&&(r+="<div class='select2-result-repository__subtitle'>"+l.subtitle+"</div>"),r+="</div>"},o=function(t){var l=e(t.element).data("meta");if(!l||"object"!=typeof l)return t.text;var r='<div class="select2-result-repository"><div class="select2-result-repository__avatar"><img src="'+l.logourl+'" class="img-sm img-circle"/></div><div class="select2-result-repository__meta"><div class="select2-result-repository__title">'+l.title+"</div>";return l.subtitle&&(r+="<div class='select2-result-repository__subtitle'>"+l.subtitle+"</div>"),r+="</div>"},a=function(e){return!1},n=function(t){var l=e("#frmAccountGUID"+settings.modId).val();return l}})(jQuery);