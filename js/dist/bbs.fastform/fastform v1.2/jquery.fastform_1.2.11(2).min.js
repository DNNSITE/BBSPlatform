/* FastForm, Ver: 1.2.11(2), Author: DNN.SITE, Website: http://dnn.site*/(function($){var defaults={localzRes:{atText:"at",statusNewText:"New",statusOkText:"Ok",statusErrorText:"Error",uplFilesTotalText:"Total",uplFilesFileText:"File"},formId:"form",modId:"",formData:[],currencyData:[],currencyId:"840",extListSrcUrl:"",readOnly:!1,hideTitle:!1,localiz_ageman:null,onChange:function(){},onChange_SrchbleFld:function(){},onChange_NotSrchbleFld:function(){}},settings,methods={init:function(t){return settings=$.extend({},defaults,t),this.each(function(){initForm(!1)})},getFormData:function(t){return getFormData(t)},getShortFormData:function(t,e){return getShortFormData(t,e)},fillForm:function(t){fillForm(convertToFormData(t))},clearForm:function(){clearForm()}};$.fn.fastForm=function(t){return methods[t]?methods[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void $.error("Method "+t+" does not exist on jQuery.fastForm"):methods.init.apply(this,arguments)};var stopEvnt=!1,uploadFileOpenEditor=function(t){ows.Fetch(settings.modId,0,"Action=openuploadpopup&ctrmn="+t,"fileUploadPane"+settings.modId,function(t){return"200"==t&&void $("#modalUploadFile"+settings.modId).modal({show:!0,backdrop:"static"})})},uploadFile_Fill=function(t,e,l){l&&$("#uplFiles_Button"+settings.modId).attr("disabled","disabled"),$.each(e,function(e,a){uploadFileAddItem(settings.modId,t,a,l)})},uploadFileAddItem=function(t,e,l){if(e&&"object"==typeof e&&0!=e.length){var a="#uplFiles_"+t+settings.modId,i="",n="fa-file-text-o";"doc"==e.type&&(n="fa-file-word-o"),"pdf"==e.type&&(n="fa-file-pdf-o"),"img"==e.type&&(n="fa-file-image-o"),i+="<tr data-file='"+JSON.stringify(e)+"'><td><i class=\"fa "+n+'"></i></td><td><a href="'+e.path+"/"+e.name+e.ext+'" target="_blank">'+$("<div/>").text(e.title).html()+'</a></td><td style="text-align:center;"><button type="button" class="btn btn-danger btn-sm"'+(l?' disabled="disabled"':"")+" onclick=\"uploadFileDelItem('"+t+"','"+e.name+'\')"><i class="fa fa-trash-o"></i></button></td></tr>',$(a).append(i),uploadFileSetData(settings.modId,t)}},uploadFileDelItem=function(t,e){$("#uplFiles_"+t+settings.modId+" tbody tr").each(function(){$(this).data("file").name==e&&$(this).remove()}),uploadFileSetData(settings.modId,t)},uploadFileSetData=function(t){var e=[],l="",a=0;$("#uplFiles_"+t+settings.modId+" tbody tr").each(function(){var t=$(this).data("file");t&&e.push(t)}),l=JSON.stringify(e),"[]"==l&&(l=""),$("#frmVal_"+t+settings.modId).val(l),""!=l&&(a=e.length),$("#uplFiles_Total_"+t+settings.modId).html(a)},showErrorAlert=function(){var t='<div id="errorAlertPane'+settings.modId+'" class="alert alert-danger fade in"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">?</button><h4>Внимание</h4><p>Произошла ошибка.</p></div>';hideAlert(settings.modId),$("#formPane"+settings.modId).before(t)},showSuccessAlert=function(){var t='<div id="successAlertPane'+settings.modId+'" class="alert alert-success fade in" style="margin:0;"><h4>Успешно!</h4><p>Ваша анкета сохранена. Для ее рассмотрения требуется подтвердить Вашу аутентичность. Для этого Вам было отправлено электронное письмо с дальнейшими инструкциями.</p><br/><div class="btn-group"><a href="/" class="btn btn-default">Ок</a></div></div>';hideAlert(),$("#formPane"+settings.modId).before(t)},hideAlert=function(){$("#errorAlertPane"+settings.modId).remove(),$("#successAlertPane"+settings.modId).remove()},extvalidtext_Valid=function(t){var e="#frmVal_"+t.name+settings.modId;if(t.hasOwnProperty("validrule")&&0==$(e).valid())return!1;var l={vmode:t.vmode,key:t.name,val:$(e).val()},a="validWaitMsg_"+t.name+settings.modId;$(e).resetForm(),$(e).attr("readonly","readonly"),$("#"+a).length&&0!=$("#"+a).length||$("#ctrPane_"+t.name+settings.modId).append('<em id="'+a+'" style="display: block;"><i class="fa fa-exclamation-triangle"></i> Подождите, идет проверка...</em>'),$.ajax({url:t.validatorurl+"&jsoncallback=?",dataType:"json",async:!1,data:l,success:function(l){$("#"+a).remove(),$(e).removeAttr("readonly"),$.map(l,function(l){0==l.isvalid&&($(e).parent().addClass("state-error").removeClass("state-success"),$('em[for="frmVal_'+t.name+settings.modId+'"]').remove(),$(e).parent().parent().append('<em for="frmVal_'+t.name+settings.modId+'" class="invalid" style="display: block;">'+t.errvalidmsg+"</em>"))})}})},clearAdvList=function(t){var e="#frmVal_"+t+settings.modId;parentname=$(e).data("parentname"),parentname||(parentname=""),""!=parentname&&$(e).html('<option value=""></option>'),$(e).val("").trigger("chosen:updated"),$(e).valid()},getUrlAdvList=function(t){var e=$("#frmVal_"+t+settings.modId).data("parentname");return e||(e=""),"/desktopmodules/ows/im.aspx?_OWS_=m:dnn_owsAppSrc,id:14032023-5508-0597-AC76-50E6C8A72BA3&srcname="+t+(""!=e?"&pfltr="+$("#frmVal_"+e+settings.modId).val():"")},extList_Load=function(t,e,l){var a="#frmVal_"+t+settings.modId;$(a).html(""),f={srcname:e,pid:l},$.ajax({url:settings.extListSrcUrl+"&jsoncallback=?",dataType:"json",async:!1,data:f,success:function(e){$(a).append('<option value=""></option>'),$.map(e,function(t){$(a).append('<option value="'+t.id+'">'+t.title+"</option>")}),extList_Fill(t)}})},extList_Fill=function(t){var e=$("#formPane"+settings.modId).data("form");e&&"object"==typeof e&&0!=e.length&&$.each(e,function(e,l){if("extlist"==l.type&&l.name==t){var a=l.value;return void(a&&($("#frmVal_"+t+settings.modId).val(a),$("#frmVal_"+t+settings.modId).change(),$("#frmVal_"+t+settings.modId).valid()))}})},initForm=function(ro){var d=settings.formData;d&&"object"==typeof d&&0!=d.length&&($.validator.addMethod("regex",function(t,e,l){return l.test(t)},"Please enter a valid value."),$(settings.formId).validate({errorElement:"em",errorClass:"invalid",errorPlacement:function(t,e){var l,a=!1;"undefined"==$(e).attr("id")&&(a=!0),l=$(e).hasClass("selectpicker")?$(e).parent():$(e),$(e).hasClass("ignore")&&(a=!0);var i=$(e).attr("disabled"),n=$(e).attr("readonly");"undefined"!=typeof i&&i!==!1&&(a=!0),"undefined"!=typeof n&&n!==!1&&(a=!0),a||t.insertAfter(l)},highlight:function(t,e,l){var a,i=!1;a=$(t).hasClass("selectpicker")?$(t).parent():$(t).parent(),"undefined"==$(t).attr("id")&&(i=!0),$(t).hasClass("ignore")&&(i=!0);var n=$(t).attr("disabled"),s=$(t).attr("readonly");if("undefined"!=typeof n&&n!==!1&&(i=!0),"undefined"!=typeof s&&s!==!1&&(i=!0),i)return void a.removeClass("state-error").removeClass("state-success");a.addClass("state-error").removeClass("state-success");var r=$("#"+$(t).attr("id")+"_chosen a");r.removeClass("state-success").addClass("state-error")},unhighlight:function(t,e,l){var a;if(a=$(t).hasClass("selectpicker")?$(t).parent():$(t).parent(),"undefined"!=$(t).attr("id")&&!$(t).hasClass("ignore")){a.removeClass("state-error").addClass("state-success");var i=$("#"+$(t).attr("id")+"_chosen a");i.removeClass("state-error"),""!=$(t).val()&&i.addClass("state-success")}}}),$.each(d,function(i,itm){var pObj=$("#fldPane_"+itm.name+settings.modId),cntrObj="#frmVal_"+itm.name+settings.modId,defVsl=!0,defEnbl=!0,cntrEnbl=!0,cntrReq=!1,html="";if(pObj.length){var itmAlt=$(pObj).data("prop");if(itmAlt&&"object"==typeof itmAlt&&(itmAlt.name=itm.name,itm=mixerFormData(itmAlt,itm)),itm.hasOwnProperty("visible")&&(defVsl=itm.visible),itm.hasOwnProperty("enable")&&(defEnbl=itm.enable,cntrEnbl=defEnbl),itm.hasOwnProperty("validrule")&&(cntrReq=itm.validrule.required),"text"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="input'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' readonly="readonly"':"")+(0==defEnbl?' disabled="disabled"':"")+(itm.defval?' value="'+itm.defval+'"':"")+(itm.plcholder?' placeholder="'+itm.plcholder+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+" />",itm.hasOwnProperty("tooltip")&&itm.tooltip&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip+"</b>"),html+="</label></div>",pObj.replaceWith(html),itm.hasOwnProperty("mask")&&itm.mask&&$(cntrObj).mask(itm.mask),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})),"extvalidtext"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="input'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',html+='<div class="input-group">',itm.hasOwnProperty("leftsubtitle")&&""!=itm.leftsubtitle&&(html+='<div class="input-group-addon">'+itm.leftsubtitle+"</div>"),html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' readonly="readonly"':"")+(0==defEnbl?' disabled="disabled"':"")+(itm.defval?' value="'+itm.defval+'"':"")+(itm.plcholder?' placeholder="'+itm.plcholder+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+" />",itm.hasOwnProperty("rightsubtitle")&&""!=itm.rightsubtitle&&(html+='<div class="input-group-addon">'+itm.rightsubtitle+"</div>"),html+="</div>",html+="</label></div>",pObj.replaceWith(html),$(cntrObj).on("change",function(){extvalidtext_Valid(itm),itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))}),$(cntrObj).rules("add",{regex:"^[a-zA-Z'.\\s]{1,40}$"})),"multitext"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label '+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="textarea'+(cntrReq?" reqInd":"")+'">',html+='<textarea rows="'+itm.rows+'" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' disabled="disabled"':"")+(itm.plcholder?' placeholder="'+itm.plcholder+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+">"+(itm.defval?itm.defval:"")+"</textarea>",itm.hasOwnProperty("tooltip")&&itm.tooltip&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip+"</b>"),html+="</label></div>",pObj.replaceWith(html),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this)})),"rangeslider"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" class="rangesliderpane" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="input'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',html+='<input type="hidden" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(itm.defval?' value="'+itm.defval+'"':"")+" />",html+="</label></div>",pObj.replaceWith(html),$(cntrObj).ionRangeSlider({type:"double",min:itm.options.min,max:itm.options.max,grid:itm.options.grid,onFinish:function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))}})),"rangedigit"==itm.type){html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">";var plcholder="",plcholder_min="From",plcholder_max="To",strArrVal="",defval_min="",defval_max="";itm.hasOwnProperty("plcholder")&&(plcholder=itm.plcholder),plcholder_min=itm.hasOwnProperty("plcholder_min")?itm.plcholder_min:""==plcholder?plcholder_min:plcholder+": "+plcholder_min,plcholder_max=itm.hasOwnProperty("plcholder_max")?itm.plcholder_max:""==plcholder?plcholder_max:plcholder+": "+plcholder_max,""!=itm.defval&&(strArrVal="["+itm.defval.replace(/|/g,",")+"]",$.isArray(eval(strArrVal))?(defval_min=eval(strArrVal)[0],defval_max=eval(strArrVal)[1]):strArrVal=""),settings.hideTitle||(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<div class="form-inline">',html+='<div class="form-group">',html+='<label class="input'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',itm.hasOwnProperty("prepcssicn")&&itm.prepcssicn&&(html+='<i class="icon-prepend '+itm.prepcssicn+'"></i>'),itm.hasOwnProperty("appcssicn")&&itm.appcssicn&&(html+='<i class="icon-append '+itm.appcssicn+'"></i>'),html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'_min" name="frmVal_'+itm.name+settings.modId+'_min"'+(ro?' readonly="readonly"':"")+(0==defEnbl?' disabled="disabled"':"")+(defval_min?' value="'+defval_min+'"':"")+(plcholder_min?' placeholder="'+plcholder_min+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+" />",itm.hasOwnProperty("tooltip_min")&&itm.tooltip_min&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip_min+"</b>"),html+="</label>",html+="</div>",html+='<div class="form-group">',html+='<label class="input'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'_max" name="frmVal_'+itm.name+settings.modId+'_max"'+(ro?' readonly="readonly"':"")+(0==defEnbl?' disabled="disabled"':"")+(defval_max?' value="'+defval_max+'"':"")+(plcholder_max?' placeholder="'+plcholder_max+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+" />",itm.hasOwnProperty("tooltip_max")&&itm.tooltip_max&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip_max+"</b>"),html+="</label>",html+="</div>",html+="</div>",html+='<input type="hidden" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(itm.defval?' value="'+itm.defval+'"':"")+">",html+="</div>",pObj.replaceWith(html),itm.hasOwnProperty("mask")&&itm.mask&&($(cntrObj+"_min").mask(itm.mask),$(cntrObj+"_max").mask(itm.mask)),""!=strArrVal&&$(cntrObj).val(itm.defval),$(cntrObj+"_min,"+cntrObj+"_max").on("change",function(){var t=$(cntrObj+"_min").val(),e=$(cntrObj+"_max").val();t=t.replace(/ /g,""),e=e.replace(/ /g,""),1==isNaN(t)&&($(cntrObj+"_min").val(""),t=""),1==isNaN(e)&&($(cntrObj+"_max").val(""),e="");var l=(""==t?"null":t)+"|"+(""==e?"null":e);"null:null"==l&&(l=""),$(cntrObj).val(l),itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,l),settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this)})}if("email"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="input'+(cntrReq?" reqInd":"")+'">',html+='<i class="icon-append fa fa-envelope"></i>',html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' disabled="disabled"':"")+(itm.defval?' value="'+itm.defval+'"':"")+(itm.plcholder?' placeholder="'+itm.plcholder+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+" />",itm.hasOwnProperty("tooltip")&&itm.tooltip&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip+"</b>"),html+="</label></div>",pObj.replaceWith(html),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})),"phone"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="input'+(cntrReq?" reqInd":"")+'">',html+='<i class="icon-append fa fa-phone"></i>',html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' disabled="disabled"':"")+(itm.defval?' value="'+itm.defval+'"':"")+(itm.plcholder?' placeholder="'+itm.plcholder+'"':"")+("0"!=itm.maxlen?' maxlength="'+itm.maxlen+'"':"")+" />",itm.hasOwnProperty("tooltip")&&itm.tooltip&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip+"</b>"),html+="</label></div>",pObj.replaceWith(html),itm.mask&&$(cntrObj).mask(itm.mask,{placeholder:"X"}),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})),"date"==itm.type){var dateformat="dd.mm.yy";html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="input'+(cntrReq?" reqInd":"")+'">',html+='<i class="icon-append fa fa-calendar"></i>',html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' disabled="disabled"':"")+(itm.defval?' value="'+itm.defval+'"':"")+(itm.plcholder?' placeholder="'+itm.plcholder+'"':"")+"/>",itm.hasOwnProperty("tooltip")&&itm.tooltip&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip+"</b>"),itm.hasOwnProperty("dateformat")&&""!=itm.dateformat&&(dateformat=itm.dateformat),html+="</label></div>",pObj.replaceWith(html),$(cntrObj).datepicker({dateFormat:dateformat,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>'}),$(cntrObj).datepicker($.datepicker.regional.ru),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})}if("money"==itm.type){html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">";var plcholder="",strArrVal="",defval_prc="",defval_cur=settings.currencyId,inptmask="# ##0";itm.hasOwnProperty("plcholder")&&(plcholder=itm.plcholder),itm.hasOwnProperty("defval")&&""!=itm.defval&&(strArrVal="["+itm.defval.replace(/|/g,",")+"]",$.isArray(eval(strArrVal))?(defval_prc=eval(strArrVal)[0],defval_cur=eval(strArrVal)[1]):strArrVal=""),itm.hasOwnProperty("mask")&&itm.mask&&(inptmask=itm.mask),settings.hideTitle||(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<div class="form-inline">',html+='<div class="form-group">',html+='<label class="input'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',html+='<input type="text" id="frmVal_'+itm.name+settings.modId+'_price" name="frmVal_'+itm.name+settings.modId+'_price"'+(ro?' readonly="readonly"':"")+(0==defEnbl?' disabled="disabled"':"")+(defval_prc?' value="'+defval_prc+'"':"")+(plcholder?' placeholder="'+plcholder+'"':"")+' maxlength="15" style="border-right:none;"/>',html+="</label>",html+="</div>",html+='<div class="form-group">',html+='<label class="selectpicker">',html+='<select id="frmVal_'+itm.name+settings.modId+'_curid" name="frmVal_'+itm.name+settings.modId+'_curid"'+(itm.plcholder?' data-placeholder="'+itm.plcholder+'"':'data-placeholder=" "')+' class="selectpicker form-control" data-size="7">',itm.hasOwnProperty("curncdata")?$.each(itm.curncdata,function(t,e){html+='<option value="'+e.id+'"'+(defval_cur==e.id?' selected="selected"':"")+(e.hasOwnProperty("icncss")?' data-icon="'+e.icncss+'"':"")+">"+e.title+"</option>"}):"object"==typeof settings.currencyData?$.each(settings.currencyData,function(t,e){html+='<option value="'+e.id+'"'+(defval_cur==e.id?' selected="selected"':"")+(e.hasOwnProperty("icncss")?' data-icon="'+e.icncss+'"':"")+">"+e.title+"</option>"}):html+='<option class="plcholder" value="">'+(itm.plcholder?itm.plcholder:"")+"</option>",html+="</select>",html+="</label>",html+="</div>",html+='<input type="hidden" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(itm.defval?' value="'+itm.defval+'"':"")+">",html+="</div>",html+="</div>",pObj.replaceWith(html),$(cntrObj+"_price").mask(inptmask,{reverse:!0}),""!=strArrVal&&$(cntrObj).val(itm.defval),$(cntrObj+"_price,"+cntrObj+"_curid").on("change",function(){var t=$(cntrObj+"_price").val(),e=$(cntrObj+"_curid").val();t=t.replace(/ /g,""),e=e.replace(/ /g,""),1==isNaN(t)&&($(cntrObj+"_price").val(""),t=""),1==isNaN(e)&&($(cntrObj+"_curid").val(""),e="");var l=(""==t?"null":t)+"|"+(""==e?"null":e);"null:null"==l&&(l=""),$(cntrObj).val(l),itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,l),settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this)})}if("list"==itm.type||"select"==itm.type){var d1;html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="select'+(cntrReq?" reqInd":"")+'">',html+='<select id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' disabled="disabled"':"")+">",html+='<option value=""></option>',itm.hasOwnProperty("listdata")&&(d1=itm.listdata,$.each(d1,function(t,e){html+='<option value="'+e.value+'"'+(itm.defval==e.value?' selected="selected"':"")+(e.dis?' disabled="disabled"':"")+">"+e.title+"</option>"})),html+="</select>",html+="<i></i>",itm.hasOwnProperty("tooltip")&&itm.tooltip&&(html+='<b class="tooltip tooltip-top-right">'+itm.tooltip+"</b>"),html+="</label></div>",pObj.replaceWith(html),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})}if("extlist"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="select'+(cntrReq?" reqInd":"")+'" >',html+='<select id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(itm.plcholder?' data-placeholder="'+itm.plcholder+'"':'data-placeholder=" "')+">",html+='<option class="plcholder" value="" disabled="disabled">'+(itm.plcholder?itm.plcholder:"")+"</option>",html+="</select>",html+="<i></i>",html+="</label></div>",pObj.replaceWith(html),itm.listautoload?setControlListData(itm.name,itm.listsrcname,null):cntrEnbl=!1,$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})),"selectpicker"==itm.type){if(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="selectpicker'+(cntrReq?" reqInd":"")+'">',html+='<select id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"'+(itm.plcholder?' data-placeholder="'+itm.plcholder+'"':'data-placeholder=" "')+' class="selectpicker form-control" data-size="7">',html+='<option class="plcholder" value="">'+(itm.plcholder?itm.plcholder:"")+"</option>",itm.hasOwnProperty("listdata")){var d1=itm.listdata;$.each(d1,function(t,e){html+='<option value="'+e.value+'"'+(itm.defval==e.value?' selected="selected"':"")+(e.dis?' disabled="disabled"':"")+(e.hasOwnProperty("icncss")?' data-icon="'+e.icncss+'"':"")+">"+e.title+"</option>"})}html+="</select>",html+="</label></div>",pObj.replaceWith(html),!itm.hasOwnProperty("listdata")&&itm.hasOwnProperty("listsrcurl")&&itm.hasOwnProperty("listsrcname")&&itm.hasOwnProperty("listautoload")&&(itm.listautoload?setControlListData(itm.name,itm.listsrcname,null):cntrEnbl=!1),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||($(this).valid(),settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})}if("advlist"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="select'+(cntrReq?" reqInd":"")+'">',html+='<select id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'" data-type="advlist"'+(itm.plcholder?' data-placeholder="'+itm.plcholder+'"':'data-placeholder=" "')+(""!=itm.parentname?' data-parentname="'+itm.parentname+'"':"")+">",html+='<option value=""></option>',html+="</select>",html+="</label></div>",pObj.replaceWith(html),$(cntrObj).ajaxChosen({dataType:"json",type:"POST",url:""},{loadingImg:"/images/loading16.gif",minLength:2,generateUrl:function(t){return getUrlAdvList(itm.name)}},{width:"100%",no_results_text:"Не найдено из: ",allow_single_deselect:!0}),$(cntrObj).on("change",function(){$(this).valid(),itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))}),""!=itm.parentname&&$("#frmVal_"+itm.parentname+settings.modId).on("change",function(){clearAdvList(itm.name)})),"chek"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">&nbsp;</label>',html+='<label class="checkbox'+(cntrReq?" reqInd":"")+'"><input type="checkbox" id="frmVal_'+itm.name+settings.modId+'" value="1" name="frmVal_'+itm.name+settings.modId+'"'+(ro?' disabled="disabled"':"")+(itm.defval?' checked="checked"':"")+"><i></i>"+itm.title+"</label></div>",pObj.replaceWith(html),$(cntrObj).on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})),"radioboolbtns"==itm.type){html='<div id="ctrPane_'+itm.name+settings.modId+'" class="btn-group'+(itm.hasOwnProperty("isrespons")?itm.isrespons?" btn-group-justified":"":" btn-group-justified")+' btn-group-radio" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+' data-toggle="buttons">';var nulltxt=itm.hasOwnProperty("nulltxt")?itm.nulltxt:"Nothing",ontxt=itm.hasOwnProperty("ontxt")?itm.ontxt:"On",offtxt=itm.hasOwnProperty("offtxt")?itm.offtxt:"Off";settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),""!=nulltxt&&(html+='<label class="btn radio'+(""===itm.defval?" active":"")+(cntrReq?" reqInd":"")+'"><input type="radio" value="" name="frmVal_'+itm.name+settings.modId+'_radiobtn"'+(ro?' disabled="disabled"':"")+(""===itm.defval?' checked="checked"':"")+' autocomplete="off">'+nulltxt+"</label>"),""!=ontxt&&(html+='<label class="btn radio'+(1===itm.defval||"1"===itm.defval||itm.defval===!0?" active":"")+(cntrReq?" reqInd":"")+'"><input type="radio" value="1" name="frmVal_'+itm.name+settings.modId+'_radiobtn"'+(ro?' disabled="disabled"':"")+(1===itm.defval||"1"===itm.defval||itm.defval===!0?' checked="checked"':"")+' autocomplete="off">'+ontxt+"</label>"),""!=offtxt&&(html+='<label class="btn radio'+(0===itm.defval||"0"===itm.defval||itm.defval===!1?" active":"")+(cntrReq?" reqInd":"")+'"><input type="radio" value="0" name="frmVal_'+itm.name+settings.modId+'_radiobtn"'+(ro?' disabled="disabled"':"")+(0===itm.defval||"0"===itm.defval||itm.defval===!1?' checked="checked"':"")+' autocomplete="off">'+offtxt+"</label>"),html+="</div>",pObj.replaceWith(html),$('input[name="frmVal_'+itm.name+settings.modId+'_radiobtn"]').on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})}if("radiobool"==itm.type){var nulltxt=itm.hasOwnProperty("nulltxt")?itm.nulltxt:"Nothing",ontxt=itm.hasOwnProperty("ontxt")?itm.ontxt:"On",offtxt=itm.hasOwnProperty("offtxt")?itm.offtxt:"Off";html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<div class="inline-group">',html+='<label class="radio'+(cntrReq?" reqInd":"")+'"><input type="radio" value="" name="frmVal_'+itm.name+settings.modId+'_radiobtn"'+(ro?' disabled="disabled"':"")+(""===itm.defval?' checked="checked"':"")+"><i></i>"+nulltxt+"</label>",html+='<label class="radio'+(cntrReq?" reqInd":"")+'"><input type="radio" value="1" name="frmVal_'+itm.name+settings.modId+'_radiobtn"'+(ro?' disabled="disabled"':"")+(1===itm.defval||"1"===itm.defval||itm.defval===!0?' checked="checked"':"")+"><i></i>"+ontxt+"</label>",html+='<label class="radio'+(cntrReq?" reqInd":"")+'"><input type="radio" value="0" name="frmVal_'+itm.name+settings.modId+'_radiobtn"'+(ro?' disabled="disabled"':"")+(0===itm.defval||"0"===itm.defval||itm.defval===!1?' checked="checked"':"")+"><i></i>"+offtxt+"</label>",html+="</div>",html+="</div>",pObj.replaceWith(html),$('input[name="frmVal_'+itm.name+settings.modId+'_radiobtn"]').on("change",function(){itm.hasOwnProperty("triggers")&&triggerFldProc(itm.triggers,$(this).val()),stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))})}"attachfiles"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle&&""!=itm.title&&(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+'">'+itm.title+"</label>"),itm.hasOwnProperty("infotext")&&""!=itm.infotext&&(html+='<div class="alert alert-info fade in" style="margin:5px 0;">'+itm.infotext+"</div>"),
html+='<table id="uplFiles_'+itm.name+settings.modId+'" class="table table-bordered table-striped" style="width:100%;">',html+='<thead style="background:#ECECEC;">',html+='<tr><th style="width:30px;"></th><th>'+settings.localzRes.uplFilesFileText+'</th><th style="width:50px;"></th></tr>',html+="</thead>",html+="<tbody></tbody>",html+='<tfoot style="background:#ECECEC;font-weight:bold;">',html+="<tr>",html+='<td colspan="3">'+settings.localzRes.uplFilesTotalText+' <span id="uplFiles_Total_'+itm.name+settings.modId+'" class="badge rounded-2x badge-light" style="font-size:13px;">0</span></td>',html+="</tr>",html+="</tfoot>",html+="</table>",html+='<div class="input-group">',html+='<button id="uplFiles_Button_'+itm.name+settings.modId+'" type="button" class="btn-u" onclick="uploadFileOpenEditor(\''+itm.name+'\')">&nbsp<i class="fa fa-plus"></i>&nbsp</button>',html+="</div>",html+='<input type="hidden" id="frmVal_'+itm.name+settings.modId+'" name="frmVal_'+itm.name+settings.modId+'"> ',pObj.replaceWith(html)),"ageman"==itm.type&&(html='<div id="ctrPane_'+itm.name+settings.modId+'" data-visible="'+defVsl+'" data-enable="'+defEnbl+'"'+(0==defVsl?' style="display:none;"':"")+">",settings.hideTitle||(html+='<label class="label'+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'" for="frmVal_'+itm.name+settings.modId+'">'+itm.title+"</label>"),html+='<label class="ageman '+(0==defEnbl?" state-disabled":"")+(cntrReq?" reqInd":"")+'">',html+='<div id="frmVal_'+itm.name+settings.modId+'"></div>',html+="</label></div>",pObj.replaceWith(html),$.fn.editableform.buttons='<button type="button" class="btn btn-success editable-submit btn-mini"><i class="fa fa-check"></i></button><button type="button" class="btn editable-cancel btn-mini"><i class="fa fa-times"></i></button>',$("#frmVal_"+itm.name+settings.modId).agemaneditor({localzRes:settings.localiz_ageman,onChange:function(){stopEvnt||(settings.onChange.call(this),itm.srchble?settings.onChange_SrchbleFld.call(this):settings.onChange_NotSrchbleFld.call(this))}})),setControlEnable(itm.name,cntrEnbl),setControlValidrule(itm)}}),fillForm(settings.formData))},mixerFormData=function(t,e){var l=e;return t&&"object"==typeof t?l.name!=t.name?l:t.hasOwnProperty("type")&&0==isCompatFormData(t.type,l.type)?l:($.each(t,function(t,e){l[t]=e}),l):l},isCompatFormData=function(t,e){var l=!1;return"text"!=e&&"phone"!=e&&"email"!=e&&"extvalidtext"!=e&&"multitext"!=e&&"rangedigit"!=e&&"rangeslider"!=e&&"money"!=e||"text"!=t&&"phone"!=t&&"email"!=t&&"extvalidtext"!=t&&"multitext"!=t&&"rangedigit"!=t&&"rangeslider"!=t&&"selectpicker"!=t&&"ageman"!=t||(l=!0),"list"!=e&&"select"!=e&&"extlist"!=e&&"selectpicker"!=e||"list"!=t&&"select"!=t&&"extlist"!=t&&"selectpicker"!=t||(l=!0),"chek"!=e&&"switch"!=e&&"radioboolbtns"!=e&&"radiobool"!=e||"chek"!=t&&"switch"!=t&&"radioboolbtns"!=t&&"radiobool"!=t||(l=!0),"attachfiles"==e&&"attachfiles"==t&&(l=!0),l};setControlVal=function(t,e){var l=settings.formData;l&&"object"==typeof l&&0!=l.length&&$.each(l,function(l,a){var i="#frmVal_"+a.name+settings.modId;if(a.name==t)return"text"!=a.type&&"list"!=a.type&&"extlist"!=a.type&&"selectpicker"!=a.type||$(i).val(e),!1})},setControlListData=function(t,e){var l=settings.formData;l&&"object"==typeof l&&0!=l.length&&$.each(l,function(l,a){if(a.name==t){if("extlist"==a.type||"selectpicker"==a.type){var i=settings.extListSrcUrl,n="#frmVal_"+a.name+settings.modId,s={srcname:a.listsrcname,pid:e},r=!0;if(""!=a.listsrcurl&&(i=a.listsrcurl),e&&""!=e||(a.hasOwnProperty("listautoload")?a.listautoload||(r=!1):r=!1),$(n).html('<option class="plcholder" value="">'+($(n).attr("data-placeholder")?$(n).data("placeholder"):"")+"</option>"),$(n).val(""),!r)return setControlEnable(a.name,!1),!1;$.ajax({url:i+"&jsoncallback=?",dataType:"json",async:!1,data:s,success:function(t){var e=!0;t&&"object"==typeof t||(e=!1),0==t.length&&(e=!1),e?("selectpicker"==a.type&&(t.length>=10?$(n).attr("data-live-search","true"):$(n).removeAttr("data-live-search")),$(n).html('<option class="plcholder" value="">'+($(n).attr("data-placeholder")?$(n).data("placeholder"):"")+"</option>"),$.map(t,function(t){$(n).append('<option value="'+t.id+'"'+(t.hasOwnProperty("icncss")?' data-icon="'+t.icncss+'"':"")+">"+t.title+"</option>")}),setControlEnable(a.name,!0)):setControlEnable(a.name,!1),setControlVal(a.name,$(n).data("val")),"selectpicker"==a.type&&$(n).selectpicker("refresh")}})}return!1}})},setControlEnable=function(t,e){var l=settings.formData;l&&"object"==typeof l&&0!=l.length&&$.each(l,function(l,a){if(a.name==t)return"text"!=a.type&&"list"!=a.type&&"extlist"!=a.type||(e?($("#ctrPane_"+a.name+settings.modId+" label.label").removeClass("state-disabled"),$("#ctrPane_"+a.name+settings.modId+" label.input").removeClass("state-disabled"),$("#ctrPane_"+a.name+settings.modId+" label.select").removeClass("state-disabled"),$("#frmVal_"+a.name+settings.modId).removeAttr("disabled")):($("#ctrPane_"+a.name+settings.modId+" label.label").addClass("state-disabled"),$("#ctrPane_"+a.name+settings.modId+" label.input").addClass("state-disabled"),$("#ctrPane_"+a.name+settings.modId+" label.select").addClass("state-disabled"),$("#frmVal_"+a.name+settings.modId).attr("disabled","disabled"))),"money"==a.type&&(e?($("#frmVal_"+a.name+settings.modId+"_curid").prop("disabled",!1),$("#frmVal_"+a.name+settings.modId+"_price").removeAttr("disabled")):($("#frmVal_"+a.name+settings.modId+"_curid").prop("disabled",!0),$("#frmVal_"+a.name+settings.modId+"_price").attr("disabled","disabled")),$("#frmVal_"+a.name+settings.modId+"_curid").selectpicker("refresh")),"selectpicker"==a.type&&(e?$("#frmVal_"+a.name+settings.modId).prop("disabled",!1):$("#frmVal_"+a.name+settings.modId).prop("disabled",!0),$("#frmVal_"+a.name+settings.modId).selectpicker("refresh")),!1})},setControlVisible=function(t,e){var l=settings.formData;l&&"object"==typeof l&&0!=l.length&&$.each(l,function(l,a){if(a.name==t){if(a.hasOwnProperty("visible")&&0==a.visible)return!1;var i="";return i=e?"":"none",$("#ctrPane_"+a.name+settings.modId).css("display",i),$("#frmVal_"+a.name+settings.modId).val(""),!1}})},setControlValidrule=function(t){if(0!=t.hasOwnProperty("validrule")){var e=t.validrule;if(null!=t&&"object"==typeof t){var l=0,a="";return null!=e&&"object"==typeof e&&0!=e.length&&(l=1),"text"!=t.type&&"money1"!=t.type&&"list"!=t.type&&"extlist"!=t.type&&"selectpicker"!=t.type||(a="#frmVal_"+t.name+settings.modId,$(a).rules("remove"),1==l&&$(a).rules("add",e)),"money"==t.type&&(a="#frmVal_"+t.name+settings.modId+"_price",$(a).rules("remove"),1==l&&$(a).rules("add",e)),!1}}},fillForm=function(df){var isClr=!1,cntrObj="",itmval;null==df||"object"!=typeof df?isClr=!0:0==df.length&&(isClr=!0),isClr&&(df=settings.formData),stopEvnt=!0,$.each(df,function(i,itm){if(cntrObj="#frmVal_"+itm.name+settings.modId,itmval=isClr?"":itm.hasOwnProperty("value")?itm.value:itm.hasOwnProperty("defval")?itm.defval:"","text"!=itm.type&&"extvalidtext"!=itm.type&&"multitext"!=itm.type&&"email"!=itm.type&&"phone"!=itm.type&&"date"!=itm.type&&"list"!=itm.type&&"extlist"!=itm.type&&"selectpicker"!=itm.type||($(cntrObj).data("val",itmval),$(cntrObj).val(itmval),$(cntrObj).change()),"rangeslider"==itm.type){var sldr=$(cntrObj).data("ionRangeSlider"),strArrVal="",defval_min="",defval_max="";""!=itmval?(strArrVal="["+itmval.replace(/\|/g,",")+"]",$.isArray(eval(strArrVal))?(defval_min=eval(strArrVal)[0],defval_max=eval(strArrVal)[1],sldr.update({from:defval_min,to:defval_max})):sldr.reset()):sldr.reset()}if("rangedigit"==itm.type){var strArrVal="",defval_min="",defval_max="";""!=itmval&&(strArrVal="["+itmval.replace(/\|/g,",")+"]",$.isArray(eval(strArrVal))?(defval_min=eval(strArrVal)[0],defval_max=eval(strArrVal)[1]):itmval=""),$(cntrObj+"_min").val(defval_min),$(cntrObj+"_max").val(defval_max),$(cntrObj).val(itmval),$(cntrObj).change()}if("money"==itm.type){var strArrVal="",prcVal="",curVal=settings.currencyId;""!=itmval&&(strArrVal="["+itmval.replace(/\|/g,",")+"]",$.isArray(eval(strArrVal))&&(prcVal=eval(strArrVal)[0],curVal=eval(strArrVal)[1])),$(cntrObj+"_price").val(prcVal),$(cntrObj+"_curid").val(curVal),$(cntrObj).val(prcVal+"|"+curVal),$(cntrObj+"_curid").change()}if("advlist"==itm.type){var d=itmval,isEmpty=!0,isExt=!1;null!=d&&"object"==typeof d&&0!=d.length&&(isEmpty=!1),0==isEmpty&&(itmval=isClr?"":d[0].id,$(cntrObj).data("val",itmval),$(cntrObj+' option[value="'+itmval+'"]').each(function(){isExt=!0}),isExt||$(cntrObj).append('<option value="'+itmval+'">'+d[0].title+"</option>"),$(cntrObj).val(itmval),$(cntrObj).trigger("chosen:updated"),$(cntrObj).change())}if("chek"==itm.type){var ischk=!1;"1"==itmval&&(ischk=!0),$(cntrObj).prop("checked",ischk),$(cntrObj).change()}if("radioboolbtns"!=itm.type&&"radiobool"!=itm.type||($("#ctrPane_"+itm.name+settings.modId+" label input").each(function(){$(this).parent().removeClass("active"),$(this).removeAttr("checked"),""!=itmval?$(this).val()==itmval&&($(this).parent().addClass("active"),$(this).attr("checked","checked")):""==$(this).val()&&($(this).parent().addClass("active"),$(this).attr("checked","checked"))}),$('input:radio[name="frmVal_'+itm.name+settings.modId+'_radiobtn"]:checked').val(itmval)),"ageman"==itm.type){var strArrVal="";""!=itmval&&(strArrVal=itmval.replace(/\|/g,",")),$("#frmVal_"+itm.name+settings.modId).agemaneditor("setValue",strArrVal)}}),stopEvnt=!1},clearForm=function(){fillForm()},showForm=function(){$("#formPane"+settings.modId).removeAttr("style")},triggerFldProc=function(t,e){var l=!1;$.each(t,function(t,a){if(!a.onval&&a.onval==e)return a.hasOwnProperty("controls")&&$.each(a.controls,function(t,l){setControlEnable(l.name,l.enable),setControlVisible(l.name,l.visible),1==l.updatelistdata&&setControlListData(l.name,e)}),l=!0,!1}),0==l&&$.each(t,function(t,l){if(null==l.val)return l.hasOwnProperty("controls")&&$.each(l.controls,function(t,l){setControlEnable(l.name,l.enable),setControlVisible(l.name,l.visible),1==l.updatelistdata&&setControlListData(l.name,e)}),!1})},getFormData=function(t){if(!t&&!$(settings.formId).valid())return null;var e=settings.formData,l=null;return e&&"object"==typeof e?0==e.length?null:($.each(e,function(t,e){if(l="","text"!=e.type&&"multitext"!=e.type&&"email"!=e.type&&"phone"!=e.type&&"date"!=e.type&&"list"!=e.type&&"extlist"!=e.type&&"selectpicker"!=e.type&&"money"!=e.type||(l=$("#frmVal_"+e.name+settings.modId).val()),"rangeslider"==e.type&&(l=$("#frmVal_"+e.name+settings.modId).val().replace(/;/g,"|")),"rangedigit"==e.type&&(l=$("#frmVal_"+e.name+settings.modId).val()),"advlist"==e.type&&(l=$("#frmVal_"+e.name+settings.modId).val()),"chek"==e.type&&(l=$("#frmVal_"+e.name+settings.modId).attr("checked")?"1":"0"),"radioboolbtns"!=e.type&&"radiobool"!=e.type||(l=$('input:radio[name="frmVal_'+e.name+settings.modId+'_radiobtn"]:checked').val()),"ageman"==e.type&&(l=$("#frmVal_"+e.name+settings.modId).agemaneditor("getValue")),"attachfiles"==e.type){var a=$("#frmVal_"+e.name+settings.modId).val();""!=a&&(l=$.parseJSON($("#frmVal_"+e.name+settings.modId).val()))}null==l&&(l=""),e.value=l}),e):null},getShortFormData=function(t,e){if(t||$(settings.formId).valid()){var l=getFormData(t);if(l&&"object"==typeof l&&0!=l.length){var a=[];return $.each(l,function(t,l){if(l.srchble){if("chek"==l.type){if(""==l.value||0==l.value||null==l.value)return!0}else if(1==e&&(""==l.value||null==l.value))return!0;var i={name:l.name,type:l.type,val:l.value};a.push(i)}}),a}}},convertToFormData=function(t){if(null!=t&&"object"==typeof t&&0!=t.length){var e=settings.formData;if(null!=e&&"object"==typeof e&&0!=e.length){var l,a=[];return null==t[0]||"object"!=typeof t[0]?$.each(t,function(t,l){$.each(e,function(e,i){if(t==i.name)return a.push({name:i.name,value:l,type:i.type}),!0})}):$.each(t,function(t,i){if(i.hasOwnProperty("value"))l=i.value;else{if(!i.hasOwnProperty("val"))return!0;l=i.val}$.each(e,function(t,e){if(i.name==e.name)return a.push({name:e.name,value:l,type:e.type}),!1})}),a}}}})(jQuery);